[{"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\index.js":"1","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\reportWebVitals.js":"2","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\App\\App.js":"3","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\Favorites\\Favorites.js":"4","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\SingleEvent\\SingleEvent.js":"5","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\Home\\Home.js":"6","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\Search\\Search.js":"7","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\utils\\utils.js":"8","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\EventList\\EventsList.js":"9","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\Event\\Event.js":"10","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\EventsInfinite\\EventsInfinite.js":"11","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\Nav\\Nav.js":"12"},{"size":588,"mtime":1631006527669,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":499162500000,"results":"15","hashOfConfig":"14"},{"size":968,"mtime":1631468809693,"results":"16","hashOfConfig":"14"},{"size":892,"mtime":1631201716140,"results":"17","hashOfConfig":"14"},{"size":3491,"mtime":1631136075267,"results":"18","hashOfConfig":"14"},{"size":1768,"mtime":1631473031636,"results":"19","hashOfConfig":"14"},{"size":1209,"mtime":1631468958005,"results":"20","hashOfConfig":"14"},{"size":568,"mtime":1631458830406,"results":"21","hashOfConfig":"14"},{"size":598,"mtime":1631452704778,"results":"22","hashOfConfig":"14"},{"size":2440,"mtime":1631459551704,"results":"23","hashOfConfig":"14"},{"size":3112,"mtime":1631453398809,"results":"24","hashOfConfig":"14"},{"size":482,"mtime":1631469036100,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1mscv85",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"28"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"28"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\index.js",[],["54","55"],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\reportWebVitals.js",[],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\App\\App.js",[],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\Favorites\\Favorites.js",[],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\SingleEvent\\SingleEvent.js",["56","57"],"import React, {useEffect, useState} from \"react\";\r\nimport parse from 'html-react-parser';\r\nimport {useParams} from \"react-router-dom/cjs/react-router-dom\";\r\nimport {fetchApi} from \"../../utils/utils\";\r\n\r\nconst SingleEvent = () => {\r\n    const [event, setEvent] = useState(null);\r\n    const [isFav, setIsFav] = useState(false)\r\n    const storage = window.localStorage;\r\n    let eventID = useParams().id\r\n    useEffect(() => {\r\n        fetchApi(setEvent, \"/records/\" + eventID)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (JSON.parse(storage.getItem('favEvent')).indexOf(eventID) >= 0) {\r\n                setIsFav(true);\r\n            }\r\n        } catch (error) {\r\n        }\r\n\r\n    }, [])\r\n\r\n    const handleFav = () => {\r\n        if (isFav) {\r\n            const result = JSON.parse(storage.getItem('favEvent')).filter(event => event !== eventID);\r\n            storage.setItem(\"favEvent\", JSON.stringify(result))\r\n            setIsFav(false);\r\n        } else {\r\n            try {\r\n                storage.setItem(\"favEvent\", JSON.stringify([...JSON.parse(storage.getItem('favEvent')), eventID]))\r\n            } catch (error) {\r\n                storage.setItem(\"favEvent\", JSON.stringify([eventID]))\r\n            }\r\n            setIsFav(true);\r\n        }\r\n    }\r\n    return (\r\n        <section className=\"page page-event\">\r\n            {event && <>\r\n                <h1>{event.record.fields.title}</h1>\r\n                <img src={event.record.fields.cover.url} alt={event.record.fields.cover_alt}/>\r\n                <div className=\"desc\">\r\n                    {parse(event.record.fields.description)}\r\n                </div>\r\n                <div className=\"date\">{\r\n                    event.record.fields.date_end\r\n                        ? <> Du {event.record.fields.date_start}, au {event.record.fields.date_end}\r\n                        </>\r\n                        : <> Débute le {event.record.fields.date_start}\r\n                        </>\r\n                }</div>\r\n                <p className=\"price\">Prix : <strong>{event.record.fields.price_detail}</strong></p>\r\n                <address>\r\n                    {event.record.fields.address_name}<br/>\r\n                    {event.record.fields.address_street}<br/>\r\n                    {event.record.fields.address_zipcode} {event.record.fields.address_city}\r\n                </address>\r\n                {\r\n                    event.record.fields.transport &&\r\n                    <div className=\"transport\"><strong>Comment nous rejoindre ?</strong> {event.record.fields.transport} </div>\r\n                }\r\n                <div className=\"contact-infos\">\r\n                    {event.record.fields.contact_phone && <>Tél : <a href={\"tel:\"+event.record.fields.contact_phone}>{event.record.fields.contact_phone}</a></>}\r\n                    {event.record.fields.contact_mail && <>Mail : <a href={\"mailto:\"+event.record.fields.contact_mail}>{event.record.fields.contact_mail}</a></>}\r\n                    {event.record.fields.contact_facebook && <>Twitter : <a href={event.record.fields.contact_facebook}>Cliquer ici</a></>}\r\n                    {event.record.fields.contact_twitter && <>Facebook : <a href={event.record.fields.contact_twitter}>Cliquer ici</a></>}\r\n                </div>\r\n            </>}\r\n\r\n            <button className=\"btn-fav\" onClick={handleFav}>\r\n                fav / {isFav ? \"its fav\" : \"its not fav\"}\r\n            </button>\r\n        </section>\r\n    )\r\n}\r\nexport default SingleEvent;","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\Home\\Home.js",["58","59","60"],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\domain\\Search\\Search.js",["61","62","63","64","65","66","67","68"],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\utils\\utils.js",[],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\EventList\\EventsList.js",["69","70"],"import React, {useEffect, useState} from \"react\";\r\nimport \"./EventList.scss\"\r\nimport Event from \"../Event/Event\";\r\n\r\nconst EventsList = ({events}) => {\r\n    useEffect(() => {\r\n        console.log(events, \"eventlist\")\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"events-list\">\r\n            <ul>\r\n                {events && events.map((item, i) => (\r\n                    <li>\r\n                        <Event key={i} infos={item.record.fields} eventID={item.record.id}/>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EventsList;","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\Event\\Event.js",["71"],"C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\EventsInfinite\\EventsInfinite.js",["72"],"import React, {Component} from \"react\";\r\nimport axios from \"axios\";\r\nimport Event from \"../Event/Event\";\r\nimport \"../EventList/EventList.scss\"\r\nimport loadImg from \"../../assets/img/load.svg\"\r\n\r\nclass EventsInfinite extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            events: [],\r\n            count: 0,\r\n            loading: false,\r\n            page: 0,\r\n            prevY: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getEvents(this.state.page);\r\n\r\n        var options = {\r\n            root: null,\r\n            rootMargin: \"0px\",\r\n            threshold: 1.0\r\n        };\r\n\r\n        this.observer = new IntersectionObserver(\r\n            this.handleObserver.bind(this),\r\n            options\r\n        );\r\n        this.observer.observe(this.loadingRef);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.query !== this.props.query) {\r\n            console.log(\"compo update\")\r\n            this.setState({...this.state, events: [], count: 0, page: 0});\r\n            this.getEvents(0);\r\n        }\r\n    }\r\n\r\n    handleObserver(entities, observer) {\r\n        const y = entities[0].boundingClientRect.y;\r\n        if (this.state.prevY > y && this.state.page <= this.state.count - 10) {\r\n            this.getEvents(this.state.page + 10)\r\n            this.setState({page: this.state.page + 10});\r\n        }\r\n        this.setState({prevY: y});\r\n    }\r\n\r\n    getEvents(page) {\r\n        this.setState({loading: true});\r\n        axios\r\n            .get(\r\n                `https://opendata.paris.fr/api/v2/catalog/datasets/que-faire-a-paris-/records?search=${this.props.query}&order_by=updated_at%20desc&limit=10&offset=${page}&pretty=false&timezone=UTC`\r\n            )\r\n            .then(res => {\r\n                console.log({...res.data})\r\n                this.setState({events: [...this.state.events, ...res.data.records], count: res.data.total_count});\r\n                this.setState({loading: false});\r\n            });\r\n    }\r\n\r\n    render() {\r\n\r\n        // Additional css\r\n        const loadingCSS = {\r\n            height: \"100px\",\r\n            margin: \"30px\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n        };\r\n\r\n        // To change the loading icon behavior\r\n        const loadingTextCSS = {display: this.state.loading ? \"block\" : \"none\"};\r\n\r\n        return (\r\n            <>\r\n                <div style={{minHeight: \"800px\"}} className=\"events-list\">\r\n                    <ul>\r\n                        {this.state.events.map((event, i) => (\r\n                            <li>\r\n                                <Event key={i} infos={event.record.fields} eventID={event.record.id}/>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n\r\n                <div\r\n                    ref={loadingRef => (this.loadingRef = loadingRef)}\r\n                    style={loadingCSS}>\r\n                    <span style={loadingTextCSS}><img src={loadImg}/></span>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default EventsInfinite;","C:\\Users\\aurel\\Desktop\\Prog2020\\Web\\Projects\\paris-events\\src\\components\\Nav\\Nav.js",["73","74"],{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":13,"column":8,"nodeType":"81","endLine":13,"endColumn":10,"suggestions":"82"},{"ruleId":"79","severity":1,"message":"83","line":23,"column":8,"nodeType":"81","endLine":23,"endColumn":10,"suggestions":"84"},{"ruleId":"85","severity":1,"message":"86","line":9,"column":12,"nodeType":"87","messageId":"88","endLine":9,"endColumn":17},{"ruleId":"89","severity":1,"message":"90","line":29,"column":17,"nodeType":"91","endLine":29,"endColumn":55},{"ruleId":"89","severity":1,"message":"90","line":37,"column":47,"nodeType":"91","endLine":37,"endColumn":69},{"ruleId":"85","severity":1,"message":"92","line":1,"column":16,"nodeType":"87","messageId":"88","endLine":1,"endColumn":25},{"ruleId":"85","severity":1,"message":"93","line":2,"column":9,"nodeType":"87","messageId":"88","endLine":2,"endColumn":17},{"ruleId":"85","severity":1,"message":"94","line":3,"column":8,"nodeType":"87","messageId":"88","endLine":3,"endColumn":18},{"ruleId":"85","severity":1,"message":"95","line":4,"column":8,"nodeType":"87","messageId":"88","endLine":4,"endColumn":22},{"ruleId":"85","severity":1,"message":"96","line":10,"column":12,"nodeType":"87","messageId":"88","endLine":10,"endColumn":17},{"ruleId":"85","severity":1,"message":"97","line":10,"column":19,"nodeType":"87","messageId":"88","endLine":10,"endColumn":27},{"ruleId":"85","severity":1,"message":"98","line":11,"column":12,"nodeType":"87","messageId":"88","endLine":11,"endColumn":18},{"ruleId":"85","severity":1,"message":"99","line":11,"column":20,"nodeType":"87","messageId":"88","endLine":11,"endColumn":29},{"ruleId":"85","severity":1,"message":"100","line":1,"column":27,"nodeType":"87","messageId":"88","endLine":1,"endColumn":35},{"ruleId":"79","severity":1,"message":"101","line":8,"column":8,"nodeType":"81","endLine":8,"endColumn":10,"suggestions":"102"},{"ruleId":"79","severity":1,"message":"83","line":21,"column":8,"nodeType":"81","endLine":21,"endColumn":10,"suggestions":"103"},{"ruleId":"89","severity":1,"message":"90","line":93,"column":50,"nodeType":"91","endLine":93,"endColumn":70},{"ruleId":"85","severity":1,"message":"104","line":2,"column":9,"nodeType":"87","messageId":"88","endLine":2,"endColumn":13},{"ruleId":"89","severity":1,"message":"90","line":9,"column":47,"nodeType":"91","endLine":9,"endColumn":65},"no-native-reassign",["105"],"no-negated-in-lhs",["106"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'eventID'. Either include it or remove the dependency array.","ArrayExpression",["107"],"React Hook useEffect has missing dependencies: 'eventID' and 'storage'. Either include them or remove the dependency array.",["108"],"no-unused-vars","'query' is assigned a value but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'useEffect' is defined but never used.","'fetchApi' is defined but never used.","'EventsList' is defined but never used.","'InfiniteScroll' is defined but never used.","'input' is assigned a value but never used.","'setInput' is assigned a value but never used.","'events' is assigned a value but never used.","'setEvents' is assigned a value but never used.","'useState' is defined but never used.","React Hook useEffect has a missing dependency: 'events'. Either include it or remove the dependency array.",["109"],["110"],"'Link' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"111","fix":"112"},{"desc":"113","fix":"114"},{"desc":"115","fix":"116"},{"desc":"113","fix":"117"},"Update the dependencies array to be: [eventID]",{"range":"118","text":"119"},"Update the dependencies array to be: [eventID, storage]",{"range":"120","text":"121"},"Update the dependencies array to be: [events]",{"range":"122","text":"123"},{"range":"124","text":"121"},[484,486],"[eventID]",[706,708],"[eventID, storage]",[225,227],"[events]",[651,653]]